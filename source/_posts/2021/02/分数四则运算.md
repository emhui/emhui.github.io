---
title: 分数四则运算
date: 2021-02-17 16:20:31
tags: [PAT]
categories: [PAT]
---

# 分数四则运算

## 分数的表示

```C++
struct Fraction{
	int up, down; // 分子分母
};
```

三条规则

1. 若分数为负，则需要保持`up`为负，`down`为正。
2. 若分数为0，则保持`up=0, down = 1;`。
3. 分子分母需要化成最简单的算式，无法约分。

## 分数的化简

> 注意：公约数应该用正整数进行计算。

```C++
// m,n 为正整数
int gcd(int m, int n) {
	return n == 0 ? m : gcd(n, m % n);
}
Fraction reduction(Fraction result) {
	if (result.down < 0) { // 如果分母为负，则需要调整至分母为正。将分子分母进行反转
		result.up = -result.up;
		result.down = -result.down;
	}
	if (result.up == 0) {
		result.down = 1;
	} else {
		int d = gcd(abs(result.up), abs(result.down));
		result.up /= d;
		result.down /= d;
	}
	return result;
}
```

## 分数四则运算

```C++
Fraction add(Fraction f1, Fraction f2) {
	Fraction result;
	result.up = f1.up * f2.down + f2.up * f1.down;
	result.down = f1.down * f2.down;
	return reduction(result);
}

// a/b - c/d = ad - bc / bd;
Fraction minu(Fraction f1, Fraction f2) {
	Fraction result;
	result.up = f1.up * f2.down - f2.up * f1.down;
	result.down = f1.down * f2.down;
	return reduction(result);
}

Fraction multi(Fraction f1, Fraction f2) {
	Fraction result;
	result.up = f1.up * f2.up;
	result.down = f1.down * f2.down;
	return reduction(result);
}

// (a / b) / (c / d) = (a / b) * (d / c) = ad / bc
Fraction divide(Fraction f1, Fraction f2) {
	Fraction result;
	result.up = f1.up * f2.down;
	result.down = f1.down * f2.up;
	return reduction(result);
}
```

注意在做除法的时候，需要先判断除数是否为0，若为0就不需要进行计算。

## 分数的输出

分数一般有下面三种形式

- 整数：分母为1。
- 假分数：分子大于分母。（只比较二者绝对值）
- 真分数：除了上面两种情况，就是真分数。

```C++
void showResult(Fraction result) {
    if (result.down == 0) {
        printf("Inf\n");
        return;
    }
	result = reduction(result);
	if (result.down == 1) { // 整数
		printf("%lld\n", result.up);
	} else if (abs(result.up) > result.down) { // 假分数
		printf("%lld %lld/%lld\n", result.up / result.down, abs(result.up) % result.down, result.down);
	} else { // 真分数
		printf("%lld/%lld\n", result.up, result.down);
	}
}
```

尽量使用`long long`型
