<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/icon/favicon.png"><link rel="icon" href="/img/icon/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="description" content="练习写作，记录Life"><meta name="author" content="Emhui"><meta name="keywords" content=""><meta name="description" content="2020年秋季PAT考试7-1 Panda and PP Milk (20分)PP milk （盆盆奶）is Pandas’ favorite. They would line up to enjoy it as show in the picture. On the other hand, they could drink in peace only if they believe that t"><meta property="og:type" content="article"><meta property="og:title" content="2020年秋季PAT考试"><meta property="og:url" content="http://emhui.fun/2021/03/08/2020%E5%B9%B4%E7%A7%8B%E5%AD%A3PAT%E8%80%83%E8%AF%95/index.html"><meta property="og:site_name" content="Emhui的小站"><meta property="og:description" content="2020年秋季PAT考试7-1 Panda and PP Milk (20分)PP milk （盆盆奶）is Pandas’ favorite. They would line up to enjoy it as show in the picture. On the other hand, they could drink in peace only if they believe that t"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://segmentfault.com/img/remote/1460000038392724"><meta property="article:published_time" content="2021-03-08T06:37:14.000Z"><meta property="article:modified_time" content="2021-10-16T06:47:09.892Z"><meta property="article:author" content="Emhui"><meta property="article:tag" content="PAT"><meta property="article:tag" content="数学"><meta property="article:tag" content="Dijkstra"><meta property="article:tag" content="最短路径"><meta property="article:tag" content="拓扑排序"><meta property="article:tag" content="前缀和"><meta property="article:tag" content="二分查找"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://segmentfault.com/img/remote/1460000038392724"><title>2020年秋季PAT考试 - Emhui的小站</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css"><link rel="stylesheet" href="/lib/hint/hint.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css"><link rel="stylesheet" href="/css/main.css"><script id="fluid-configs">var Fluid=window.Fluid||{},CONFIG={hostname:"emhui.fun",root:"/",version:"1.8.12",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},copy_btn:!0,image_zoom:{enable:!0},toc:{enable:!0,headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,onlypost:!1},web_analytics:{enable:!0,baidu:"e2720b60fa1323d2ed667e95b6b213c7",google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null}},search_path:"/local-search.xml"}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body><header style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>浮生若梦H</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类</a></li><li class="nav-item"><a class="nav-link" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div class="banner" id="banner" parallax="true" style="background:url(https://api.dujin.org/bing/1366.php) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="page-header text-center fade-in-up"><span class="h2" id="subtitle" title="2020年秋季PAT考试"></span><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2021-03-08 14:37" pubdate>2021年3月8日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 13k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> NaN 分钟</span></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div class="py-5" id="board"><article class="post-content mx-auto"><h1 style="display:none">2020年秋季PAT考试</h1><div class="markdown-body"><h1 id="2020年秋季PAT考试"><a href="#2020年秋季PAT考试" class="headerlink" title="2020年秋季PAT考试"></a>2020年秋季PAT考试</h1><h2 id="7-1-Panda-and-PP-Milk-20分"><a href="#7-1-Panda-and-PP-Milk-20分" class="headerlink" title="7-1 Panda and PP Milk (20分)"></a>7-1 Panda and PP Milk (20分)</h2><p>PP milk （盆盆奶）is Pandas’ favorite. They would line up to enjoy it as show in the picture. On the other hand, they could drink in peace only if they believe that the amount of PP milk is fairly distributed, that is, fatter panda can have more milk, and the ones with equal weight may have the same amount. Since they are lined up, each panda can only compare with its neighbor(s), and if it thinks this is unfair, the panda would fight with its neighbor.</p><p>Given that the minimum amount of milk a panda must drink is 200 ml. It is only when another bowl of milk is at least 100 ml more than its own that a panda can sense the difference.</p><p>Now given the weights of a line of pandas, your job is to help the breeder（饲养员）to decide the minimum total amount of milk that he/she must prepare, provided that the pandas are lined up in the given order.</p><h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. For each case, first a positive integer n (≤104) is given as the number of pandas. Then in the next line, n positive integers are given as the weights (in kg) of the pandas, each no more than 200. the numbers are separated by spaces.</p><h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, print in a line the minimum total amount of milk that the breeder must prepare, to make sure that all the pandas can drink in peace.</p><h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-number">10</span><br><span class="hljs-number">180</span> <span class="hljs-number">160</span> <span class="hljs-number">100</span> <span class="hljs-number">150</span> <span class="hljs-number">145</span> <span class="hljs-number">142</span> <span class="hljs-number">138</span> <span class="hljs-number">138</span> <span class="hljs-number">138</span> <span class="hljs-number">140</span>`<br></code></pre></td></tr></table></figure><h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-number">3000</span><br></code></pre></td></tr></table></figure><h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint:"></a>Hint:</h3><p>The distribution of milk is the following:</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-number">400</span> <span class="hljs-number">300</span> <span class="hljs-number">200</span> <span class="hljs-number">500</span> <span class="hljs-number">400</span> <span class="hljs-number">300</span> <span class="hljs-number">200</span> <span class="hljs-number">200</span> <span class="hljs-number">200</span> <span class="hljs-number">300</span><br></code></pre></td></tr></table></figure><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>设置两个数组<code>leftScan, rightScan</code>，一个从左往右扫描，另一个从右往左扫描。两个数组都需要满足下面逻辑。</p><ul><li>默认两个数组的起始位置的牛奶量都是200ml。</li><li>若当前的重量比上一个猫的重量重，则这个猫的牛奶量在上一个猫的基础上+100ml。</li><li>若当前重量和上一个猫的重量一样，则这个猫的牛奶量和上一个猫一样。</li><li>若当前重量比上一个猫的重量小，那这个猫的牛奶量为200ml。</li></ul><p>伪代码如下</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; weight;<br><span class="hljs-keyword">int</span> curPanda, prePanda;<br><br><span class="hljs-keyword">if</span> (weight[curPanda] &gt; weight[prePanda]) &#123;<br>	weight[curPanda] = weight[prePanda] + <span class="hljs-number">100</span>;<br>&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (weight[curPanda] == weight[prePanda]) &#123;<br>	weight[curPanda] = weight[prePanda];<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>	weight[curPanda] = <span class="hljs-number">200</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>最后取左右扫描后结果最大的值就是所求答案。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;algorithm&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span><br>    <span class="hljs-keyword">int</span> n;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; n;<br>    vector&lt;int&gt; leftScan(n), rightScan(n), weight(n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<span class="hljs-built_in">cin</span> &gt;&gt; weight[i];&#125;<br>    <span class="hljs-keyword">int</span> milk = <span class="hljs-number">200</span>;<br>    <span class="hljs-keyword">int</span> left = <span class="hljs-number">0</span>, right = n - <span class="hljs-number">1</span>;<br>    leftScan[left] = rightScan[right] = milk;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (weight[i] &gt; weight[i - <span class="hljs-number">1</span>]) &#123;<br>            milk += <span class="hljs-number">100</span>;<br>            leftScan[i] = milk;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (weight[i] == weight[i - <span class="hljs-number">1</span>]) &#123;<br>            leftScan[i] = milk;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            milk = <span class="hljs-number">200</span>;<br>            leftScan[i] = milk;<br>        &#125;<br>    &#125;<br>    milk = <span class="hljs-number">200</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = n - <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br>        <span class="hljs-keyword">if</span> (weight[i + <span class="hljs-number">1</span>] &gt; weight[i]) &#123;<br>            milk = <span class="hljs-number">200</span>;<br>            rightScan[i] = milk;<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (weight[i + <span class="hljs-number">1</span>] == weight[i]) &#123;<br>            rightScan[i] = milk;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            milk += <span class="hljs-number">100</span>;<br>            rightScan[i] = milk;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">int</span> sum = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        sum += max(leftScan[i], rightScan[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, sum);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-2-How-Many-Ways-to-Buy-a-Piece-of-Land-25分"><a href="#7-2-How-Many-Ways-to-Buy-a-Piece-of-Land-25分" class="headerlink" title="7-2 How Many Ways to Buy a Piece of Land (25分)"></a>7-2 How Many Ways to Buy a Piece of Land (25分)</h2><p>The land is for sale in CyberCity, and is divided into several pieces. Here it is assumed that each piece of land has exactly two neighboring pieces, except the first and the last that have only one. One can buy several contiguous（连续的） pieces at a time. Now given the list of prices of the land pieces, your job is to tell a customer in how many different ways that he/she can buy with a certain amount of money.</p><h3 id="Input-Specification-1"><a href="#Input-Specification-1" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case first gives in a line two positive integers: N (≤104), the number of pieces of the land (hence the land pieces are numbered from 1 to N in order), and M (≤109), the amount of money that your customer has.</p><p>Then in the next line, N positive integers are given, where the i-th one is the price of the i-th piece of the land.</p><p>It is guaranteed that the total price of the land is no more than 109.</p><h3 id="Output-Specification-1"><a href="#Output-Specification-1" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case, print the number of different ways that your customer can buy. Notice that the pieces must be contiguous.</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">5 </span><span class="hljs-number">85</span><br><span class="hljs-symbol">38 </span><span class="hljs-number">42</span> <span class="hljs-number">15</span> <span class="hljs-number">24</span> <span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs angelscript"><span class="hljs-number">11</span><br></code></pre></td></tr></table></figure><h3 id="Hint-1"><a href="#Hint-1" class="headerlink" title="Hint:"></a>Hint:</h3><p>The 11 different ways are:</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-number">38</span><br><span class="hljs-number">42</span><br><span class="hljs-number">15</span><br><span class="hljs-number">24</span><br><span class="hljs-number">9</span><br><span class="hljs-symbol">38 </span><span class="hljs-number">42</span><br><span class="hljs-symbol">42 </span><span class="hljs-number">15</span><br><span class="hljs-symbol">42 </span><span class="hljs-number">15</span> <span class="hljs-number">24</span><br><span class="hljs-symbol">15 </span><span class="hljs-number">24</span><br><span class="hljs-symbol">15 </span><span class="hljs-number">24</span> <span class="hljs-number">9</span><br><span class="hljs-symbol">24 </span><span class="hljs-number">9</span><br></code></pre></td></tr></table></figure><h3 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h3><p>本题考查 <strong>前缀和、二分查找</strong></p><p>题目大意是使用一定的金额购买连续的土地，所以需要求出一定区间内的和，求区间和使用前缀和。</p><p>前缀和中，求<code>sum[i,j] = preSum[j + 1] - [i]</code>.</p><p>题目需要找到区间和满足 <code>sum[i,j] &lt; k;</code> k为给定金额。所以可以使用暴力找到所有满足条件的结果或者是使用二分查找，找到第一个区间和大于k的下标。这里主要讲使用二分查找来实现。</p><p>找出第一个大于x的二分查找模板如下</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// 找到第一个大于的x的值</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">upper_bound</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> left, <span class="hljs-keyword">int</span> right, <span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> mid;<br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>        mid = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (nums[mid] &gt; x) right = mid;<br>        <span class="hljs-keyword">else</span> left = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> left;<br>&#125;<br></code></pre></td></tr></table></figure><p>接下来考虑应该传递什么值到<code>upper_bound</code>中呢？</p><p>这里主要考虑下面两个问题</p><ul><li>left,right范围？</li><li>x应该是什么？</li></ul><ol><li>left,right范围？</li></ol><p>首先明白二分法的一个概念，查找第一个大于x的值的位置，那么这个值的位置的范围区间是在一个左闭右开区间(假设数组中最后一个值的nums[n - 1], 但是x的值比最后一个值还大，那么x所在的位置肯定是在第n个位置)。本题中需要在前缀和中找到第一个大于x的值，传递到<code>upper_bound</code>中的区间范围应该是[0, n + 1). （preSum的范围是[0, n]）.</p><ol start="2"><li>x应该是什么？</li></ol><p>在这道题目中，需要找到区间内的和小于k，所以传递的参数应该是<code>preSum[i] + k</code>.</p><p>得到的和结果是 <code>preSum[j] - preSum[i]</code></p><p>但是前面提到过<code>sum[i, j] = preSum[j + 1] - preSum[i];</code></p><p>所以最终j的真实区间是<code>[i, j - 1]</code>. 即<code>sum[i, j - 1] = preSum[j] - preSum[i] &gt; k</code></p><p>所以<code>upper_bound</code>中传递的值应该如下所示</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-comment">// 使用二分法的话需要-1</span><br><span class="hljs-keyword">int</span> j = upper_bound(preSum, i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>, preSum[i] + k) - <span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p>最后累加所有满足条件的结果</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs C++">ans += (j - i);<br></code></pre></td></tr></table></figure><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-keyword">int</span> n, m;<br><br><span class="hljs-comment">// 找到第一个大于的x的值</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">upper_bound</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt;&amp; nums, <span class="hljs-keyword">int</span> left, <span class="hljs-keyword">int</span> right, <span class="hljs-keyword">int</span> x)</span> </span>&#123;<br>    <span class="hljs-keyword">int</span> mid;<br>    <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>        mid = left + ((right - left) &gt;&gt; <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">if</span> (nums[mid] &gt; x) right = mid;<br>        <span class="hljs-keyword">else</span> left = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> left;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span><br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">int</span> piece;<br>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">preSum</span><span class="hljs-params">(n + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)</span></span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; piece;<br>        preSum[i + <span class="hljs-number">1</span>] = preSum[i] + piece;<br>    &#125;<br>    <span class="hljs-keyword">int</span> ans = <span class="hljs-number">0</span>, j;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>        <span class="hljs-comment">// 思考一下这里为什么-1</span><br>        <span class="hljs-comment">// sum[i,j] = preSum[j + 1] - preSum[i];</span><br>        <span class="hljs-comment">// 假如[38, 42, 15]三个值的和是95, 他的范围是 sum[0,3] = preSum[4] - preSum[0];</span><br>        <span class="hljs-comment">// 返回的j的其实存在一个j+1的过程，所以需要-1，这样就是sum[i,j]和了。</span><br>        <span class="hljs-comment">// 二分法是左闭右开区间，preSum的区间在[0,n],二分法区间则在[0, n+1)</span><br>        j = upper_bound(preSum, i + <span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>, preSum[i] + m) - <span class="hljs-number">1</span>;<br><span class="hljs-comment">/*         j = i;</span><br><span class="hljs-comment">        while (j &lt; n &amp;&amp; preSum[j + 1] - preSum[i] &lt; m) j++; */</span><br>        <span class="hljs-built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; j &lt;&lt; <span class="hljs-built_in">endl</span>;<br>        ans += (j - i);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, ans);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-3-Left-View-of-Binary-Tree-25分"><a href="#7-3-Left-View-of-Binary-Tree-25分" class="headerlink" title="7-3 Left-View of Binary Tree (25分)"></a>7-3 Left-View of Binary Tree (25分)</h2><p>The <strong>left-view</strong> of a binary tree is a list of nodes obtained by looking at the tree from left hand side and from top down. For example, given a tree shown by the figure, its left-view is { 1, 2, 3, 4, 5 }</p><p><img src="https://segmentfault.com/img/remote/1460000038392724" srcset="/img/loading.gif" lazyload alt="fig.JPG"></p><p>Given the inorder and preorder traversal sequences of a binary tree, you are supposed to output its left-view.</p><h3 id="Input-Specification-2"><a href="#Input-Specification-2" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. For each case, the first line contains a positive integer N (≤20), which is the total number of nodes in the tree. Then given in the following 2 lines are the inorder and preorder traversal sequences of the tree, respectively. All the keys in the tree are distinct positive integers in the range of <strong>int</strong>.</p><h3 id="Output-Specification-2"><a href="#Output-Specification-2" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each case, print in a line the left-view of the tree. All the numbers in a line are separated by exactly 1 space, and there must be no extra space at the beginning or the end of the line.</p><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">2 </span><span class="hljs-number">3</span> <span class="hljs-number">1</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">6</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">TreeNode</span>&#123;</span><br>    <span class="hljs-keyword">int</span> val;<br>    TreeNode *left, *right;<br>    TreeNode(<span class="hljs-keyword">int</span> _val): val(_val), left(<span class="hljs-literal">nullptr</span>), right(<span class="hljs-literal">nullptr</span>) &#123;&#125;<br>&#125;;<br><br><span class="hljs-keyword">int</span> n;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; preorder, inorder;<br><br><span class="hljs-function">TreeNode* <span class="hljs-title">create</span><span class="hljs-params">(<span class="hljs-keyword">int</span> preL, <span class="hljs-keyword">int</span> preR, <span class="hljs-keyword">int</span> inL, <span class="hljs-keyword">int</span> inR)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (preL &gt; preR) <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;<br>    TreeNode* root = <span class="hljs-keyword">new</span> TreeNode(preorder[preL]);<br>    <span class="hljs-keyword">int</span> mid;<br>    <span class="hljs-keyword">for</span> (mid = inL; mid &lt;= inR; mid++) &#123;<br>        <span class="hljs-keyword">if</span> (preorder[preL] == inorder[mid]) <span class="hljs-keyword">break</span>;<br>    &#125;<br>    <span class="hljs-keyword">int</span> num = mid - inL;<br>    root-&gt;left = create(preL + <span class="hljs-number">1</span>, preL + num, inL, mid - <span class="hljs-number">1</span>);<br>    root-&gt;right = create(preL + num + <span class="hljs-number">1</span>, preR, mid + <span class="hljs-number">1</span>, inR);<br>    <span class="hljs-keyword">return</span> root;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">bfs</span><span class="hljs-params">(TreeNode* root)</span> </span>&#123;<br>    <span class="hljs-built_in">queue</span>&lt;TreeNode*&gt; q;<br>    q.push(root);<br>    TreeNode* node;<br>    <span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; ans;<br>    <span class="hljs-keyword">while</span> (!q.empty()) &#123;<br>        <span class="hljs-keyword">int</span> size = q.size();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            node = q.front();<br>            q.pop();<br>            <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>) ans.push_back(node-&gt;val);<br>            <span class="hljs-keyword">if</span> (node-&gt;left) q.push(node-&gt;left);<br>            <span class="hljs-keyword">if</span> (node-&gt;right) q.push(node-&gt;right);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; ans.size(); i++) &#123;<br>        <span class="hljs-keyword">if</span> (i != <span class="hljs-number">0</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; &quot;</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, ans[i]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span><br>    <span class="hljs-built_in">cin</span> &gt;&gt; n ;<br>    preorder.resize(n);<br>    inorder.resize(n);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; inorder[i];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) <span class="hljs-built_in">cin</span> &gt;&gt; preorder[i];<br>    TreeNode* root = create(<span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, n - <span class="hljs-number">1</span>);<br>    bfs(root);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="7-4-Professional-Ability-Test-30分"><a href="#7-4-Professional-Ability-Test-30分" class="headerlink" title="7-4 Professional Ability Test (30分)"></a>7-4 Professional Ability Test (30分)</h2><p>Professional Ability Test (PAT) consists of several series of subject tests. Each test is divided into several levels. Level A is a <strong>prerequisite (前置要求)</strong> of Level B if one must pass Level A with a score no less than S in order to be qualified to take Level B. At the mean time, one who passes Level A with a score no less than S will receive a voucher（代金券）of D yuans (Chinese dollar) for taking Level B.</p><p>At the moment, this PAT is only in design and hence people would make up different plans. A plan is <strong>NOT</strong> consistent if there exists some test T so that T is a prerequisite of itself. Your job is to test each plan and tell if it is a consistent one, and at the mean time, find the easiest way (with minimum total S) to obtain the certificate of any subject test. If the easiest way is not unique, find the one that one can win the maximum total value of vouchers.</p><h3 id="Input-Specification-3"><a href="#Input-Specification-3" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. For each case, the first line gives two positive integers N (≤1000) and M, being the total numbers of tests and prerequisite relations, respectively. Then M lines follow, each describes a prerequisite relation in the following format:</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-built_in">T1</span> <span class="hljs-built_in">T2</span> S D<br></code></pre></td></tr></table></figure><p>where <code>T1</code> and <code>T2</code> are the indices (from 0 to N−1) of the two distinct tests; <code>S</code> is the minimum score (in the range (0, 100]) required to pass <code>T1</code> in order to be qualified to take <code>T2</code>; and <code>D</code> is the value of the voucher (in the range (0, 500]) one can receive if one passes <code>T1</code> with a score no less than <code>S</code> and plan to take <code>T2</code>. It is guaranteed that at most one pair of <code>S</code> and <code>D</code> are defined for a prerequisite relation.</p><p>Then another positive integer K (≤N) is given, followed by K queries of tests. All the numbers in a line are separated by spaces.</p><h3 id="Output-Specification-3"><a href="#Output-Specification-3" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>Print in the first line <code>Okay.</code> if the whole plan is consistent, or <code>Impossible.</code> if not.</p><p>If the plan is consistent, for each query of test <code>T</code>, print in a line the easiest way to obtain the certificate of this test, in the format:</p><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs clean">T0-&gt;T1-&gt;...-&gt;T<br></code></pre></td></tr></table></figure><p>However, if <code>T</code> is the first level of some subject test (with no prerequisite), print <code>You may take test T directly.</code> instead.</p><p>If the plan is impossible, for each query of test <code>T</code>, check if one can take it directly or not. If the answer is yes, print in a line <code>You may take test T directly.</code>; or print <code>Error.</code> instead.</p><h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input 1:"></a>Sample Input 1:</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">8 </span><span class="hljs-number">15</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">50</span> <span class="hljs-number">50</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">4</span> <span class="hljs-number">90</span> <span class="hljs-number">90</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">7</span> <span class="hljs-number">90</span> <span class="hljs-number">80</span><br><span class="hljs-symbol">4 </span><span class="hljs-number">5</span> <span class="hljs-number">20</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">7 </span><span class="hljs-number">5</span> <span class="hljs-number">10</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">5 </span><span class="hljs-number">6</span> <span class="hljs-number">10</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">4</span> <span class="hljs-number">80</span> <span class="hljs-number">60</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">1</span> <span class="hljs-number">50</span> <span class="hljs-number">45</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">4</span> <span class="hljs-number">30</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">5</span> <span class="hljs-number">50</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">4</span> <span class="hljs-number">10</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">7 </span><span class="hljs-number">2</span> <span class="hljs-number">10</span> <span class="hljs-number">30</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">5</span> <span class="hljs-number">30</span> <span class="hljs-number">20</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">6</span> <span class="hljs-number">40</span> <span class="hljs-number">60</span><br><span class="hljs-number">8</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output 1:"></a>Sample Output 1:</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs angelscript">Okay.<br>You may take test <span class="hljs-number">0</span> directly.<br><span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span><br><span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span><br>You may take test <span class="hljs-number">3</span> directly.<br><span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">4</span><br><span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">4</span>-&gt;<span class="hljs-number">5</span><br><span class="hljs-number">0</span>-&gt;<span class="hljs-number">1</span>-&gt;<span class="hljs-number">2</span>-&gt;<span class="hljs-number">6</span><br><span class="hljs-number">3</span>-&gt;<span class="hljs-number">7</span><br></code></pre></td></tr></table></figure><h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input 2:"></a>Sample Input 2:</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs basic"><span class="hljs-symbol">4 </span><span class="hljs-number">5</span><br><span class="hljs-symbol">0 </span><span class="hljs-number">1</span> <span class="hljs-number">1</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">1 </span><span class="hljs-number">2</span> <span class="hljs-number">2</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">0</span> <span class="hljs-number">4</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">2</span> <span class="hljs-number">5</span> <span class="hljs-number">10</span><br><span class="hljs-symbol">2 </span><span class="hljs-number">0</span> <span class="hljs-number">3</span> <span class="hljs-number">10</span><br><span class="hljs-number">2</span><br><span class="hljs-symbol">3 </span><span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output 2:"></a>Sample Output 2:</h3><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs erlang">Impossible.<br>You may take test <span class="hljs-number">3</span> directly.<br>Error.<br></code></pre></td></tr></table></figure><h3 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h3><p>本题考查 <strong>拓扑排序、有向图、最短路径</strong></p><p>本题题目需要判断该有向图是否连通，使用拓扑排序判断(判断连通这一块比较难想到，因为题目说的是存在一致性，和有向图是否连通判断可能有点难联系)</p><p>接下来就是判断以入度为0的点作为起点，然后到达各个点的最短距离。如果把每个入度为0的点都求一次最短路径，可能部分用例会超时，这里参考<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038393142">7-4 Professional Ability Test (30分)</a>做法。</p><p>使用一个虚拟头结点，将虚拟头结点指向入度为0的点，本题中，所有的点的范围在<code>[0~n-1]</code>。所以将<code>n</code>的位置设置为虚拟头结点。只需要求一遍最短路径即可。</p><h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs C++"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;queue&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;map&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> MAX = <span class="hljs-number">987654321</span>;<br><br><span class="hljs-keyword">int</span> n, m;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; &gt; &gt; score, dollar;<br><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; parent;<br><br><span class="hljs-function"><span class="hljs-keyword">bool</span> <span class="hljs-title">isTopo</span><span class="hljs-params">(<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; inDegree)</span> </span>&#123;<br>    <span class="hljs-built_in">queue</span>&lt;<span class="hljs-keyword">int</span>&gt; q;<br>    <span class="hljs-keyword">int</span> num = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n; ++i) &#123;<br>        <span class="hljs-keyword">if</span> (inDegree[i] == <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-comment">// 设置一个虚拟结点指向所以的入度为0的结点</span><br>            score[n].push_back(<span class="hljs-built_in">make_pair</span>(i, <span class="hljs-number">0</span>));<br>            dollar[n].push_back(<span class="hljs-built_in">make_pair</span>(i, <span class="hljs-number">0</span>));<br>            q.push(i);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">int</span> u;<br>    <span class="hljs-keyword">while</span>(!q.empty()) &#123;<br>        u = q.front();<br>        q.pop();<br>        num++;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; score[u].size(); ++i) &#123;<br>            <span class="hljs-keyword">int</span> v = score[u][i].first;<br>            <span class="hljs-keyword">if</span> (--inDegree[v] == <span class="hljs-number">0</span>) q.push(v);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> num == n;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">Dijkstra</span><span class="hljs-params">(<span class="hljs-keyword">int</span> s)</span> </span>&#123;<br>    vector&lt;int&gt; dis(n + 1, MAX), voucher(n + 1, 0), visited(n + 1, 0);<br>    dis[s] = voucher[s] = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">priority_queue</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt;, <span class="hljs-built_in">vector</span>&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; &gt;, greater&lt;<span class="hljs-built_in">pair</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-keyword">int</span>&gt; &gt; &gt; pq;<br>    pq.push(<span class="hljs-built_in">make_pair</span>(<span class="hljs-number">0</span>, s));<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i; i &lt; n + <span class="hljs-number">1</span>; ++i) parent[i] = i;<br>    <span class="hljs-keyword">while</span> (!pq.empty()) &#123;<br>        <span class="hljs-keyword">int</span> u = pq.top().second;<br>        pq.pop();<br>        <span class="hljs-keyword">if</span> (visited[u]) <span class="hljs-keyword">continue</span>;<br>        visited[u] = <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; score[u].size(); ++i) &#123;<br>            <span class="hljs-keyword">int</span> v = score[u][i].first, cost = score[u][i].second;<br>            <span class="hljs-keyword">if</span> (!visited[v]) &#123;<br>                <span class="hljs-keyword">if</span> (dis[u] + cost &lt; dis[v]) &#123;<br>                    dis[v] = dis[u] + cost;<br>                    voucher[v] = voucher[u] + dollar[u][i].second;<br>                    parent[v] = u;<br>                    pq.push(<span class="hljs-built_in">make_pair</span>(dis[v], v));<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (dis[u] + cost == dis[v] &amp;&amp; voucher[u] + dollar[u][i].second &gt; voucher[v]) &#123;<br>                    voucher[v] = voucher[u] + dollar[u][i].second;<br>                    parent[v] = u;<br>                    pq.push(<span class="hljs-built_in">make_pair</span>(dis[v], v));<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">dfs</span><span class="hljs-params">(<span class="hljs-keyword">int</span> s)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (s == n) <span class="hljs-keyword">return</span>;<br>    dfs(parent[s]);<br>    <span class="hljs-keyword">if</span> (parent[s] != n) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;-&gt;&quot;</span>); <span class="hljs-comment">// 上一个结点是起点，就不用打印箭头</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, s);<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-comment">// freopen(&quot;in.txt&quot;, &quot;r&quot;, stdin);</span><br>    <span class="hljs-built_in">cin</span> &gt;&gt; n &gt;&gt; m;<br>    <span class="hljs-keyword">int</span> t1, t2 ,s, d;<br>    <span class="hljs-function"><span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">inDegree</span><span class="hljs-params">(n)</span></span>;<br>    score.resize(n + <span class="hljs-number">1</span>);<br>    dollar.resize(n + <span class="hljs-number">1</span>);<br>    parent.resize(n + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++) &#123;<br>        <span class="hljs-built_in">cin</span> &gt;&gt; t1 &gt;&gt; t2 &gt;&gt; s &gt;&gt; d;<br>        score[t1].push_back(<span class="hljs-built_in">make_pair</span>(t2, s));<br>        dollar[t1].push_back(<span class="hljs-built_in">make_pair</span>(t2,d));<br>        inDegree[t2]++;<br>    &#125;<br>    <span class="hljs-keyword">bool</span> isConsistent = isTopo(inDegree);<br>    <span class="hljs-keyword">int</span> k;<br>    <span class="hljs-built_in">cin</span> &gt;&gt; k;<br>    <span class="hljs-keyword">if</span> (!isConsistent) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Impossible.\n&quot;</span>);<br>        <span class="hljs-keyword">while</span> (k--) &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; t1;<br>            <span class="hljs-keyword">if</span> (inDegree[t1] == <span class="hljs-number">0</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;You may take test %d directly.\n&quot;</span>, t1);<br>            <span class="hljs-keyword">else</span> <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Error.\n&quot;</span>);<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Okay.\n&quot;</span>);<br>        Dijkstra(n);<br>        <span class="hljs-keyword">while</span> (k--) &#123;<br>            <span class="hljs-built_in">cin</span> &gt;&gt; t1;<br>            <span class="hljs-keyword">if</span> (inDegree[t1] == <span class="hljs-number">0</span>) <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;You may take test %d directly.\n&quot;</span>, t1);<br>            <span class="hljs-keyword">else</span> &#123;<br>                dfs(t1);<br>                <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038393041">7-1 Panda and PP Milk (20分)</a></li><li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038393067">7-2 How Many Ways to Buy a Piece of Land (25分)</a></li><li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038392721">7-3 Left-View of Binary Tree (25分)</a></li><li><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000038393142">7-4 Professional Ability Test (30分)</a></li></ul></div><hr><div><div class="post-metas mb-3"><div class="post-meta mr-3"><i class="iconfont icon-category"></i> <a class="hover-with-bg" href="/categories/PAT/">PAT</a></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a class="hover-with-bg" href="/tags/PAT/">PAT</a> <a class="hover-with-bg" href="/tags/%E6%95%B0%E5%AD%A6/">数学</a> <a class="hover-with-bg" href="/tags/Dijkstra/">Dijkstra</a> <a class="hover-with-bg" href="/tags/%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84/">最短路径</a> <a class="hover-with-bg" href="/tags/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/">拓扑排序</a> <a class="hover-with-bg" href="/tags/%E5%89%8D%E7%BC%80%E5%92%8C/">前缀和</a> <a class="hover-with-bg" href="/tags/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE/">二分查找</a></div></div><p class="note note-warning">本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！</p><div class="post-prevnext"><article class="post-prev col-6"><a href="/2021/03/09/2020%E5%B9%B4%E5%86%AC%E5%AD%A3PAT%E8%80%83%E8%AF%95/"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">2020年冬季PAT考试</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2021/03/06/2020%E5%B9%B4%E6%98%A5%E5%AD%A3PAT%E8%80%83%E8%AF%95/"><span class="hidden-mobile">2020年春季PAT考试</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article class="comments" id="comments" lazyload><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){var t=document.documentElement.getAttribute("data-user-color-scheme");t="dark"===t?"github-dark":"github-light",window.UtterancesThemeLight="github-light",window.UtterancesThemeDark="github-dark";var e=document.createElement("script");e.setAttribute("src","https://utteranc.es/client.js"),e.setAttribute("repo","emhui/comments"),e.setAttribute("issue-term","pathname"),e.setAttribute("label","utterances"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(e)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer class="text-center mt-5 py-3"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></footer><script src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/local-search.js"></script><script src="/js/img-lazyload.js"></script><script src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js"></script><script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js"></script><script>!function(t,i){(0,Fluid.plugins.typing)(i.getElementById("subtitle").title)}(window,document)</script><script defer>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?e2720b60fa1323d2ed667e95b6b213c7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="/js/boot.js"></script></body></html>